openapi: '3.0.0'
info:
  title: Stair Crusher Club Admin API Specification
  version: '1.0.0'
  description: |
    ## 계단정복지도 서비스의 서버 - 어드민 통신을 위한 API 명세.

servers:
  - url: https://{env}.staircrusher.club/admin
    variables:
      env:
        description: API 주소 환경 설정
        default: 'api'
        enum:
          - 'api'
          - 'api.dev'

security:
  # 모든 API 는 기본적으로 AdminAuth 를 적용
  - Admin: []

tags:
  - name: challenge
  - name: accessibility
  - name: banner
  - name: bbucle-road
  - name: building-division
  - name: place-list

paths:
  /login:
    post:
      summary: 로그인을 한다.
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                password:
                  type: string
              required:
                - username
                - password
      responses:
        '204':
          description: |
            빈 response body를 내려준다.
            대신 Header의 X-SCC-ACCESS-KEY에 access token을 내려준다.
            클라이언트는 이 토큰을 Bearer auth의 토큰으로 사용하면 된다.

  /clubQuestSummaries/cursored:
    get:
      summary: 커서링 방식의 퀘스트 조회 API
      operationId: getCursoredClubQuestSummaries
      description: 퀘스트 목록을 커서링 방식으로 조회한다.
      parameters:
        - in: query
          name: cursor
          schema:
            type: string
          required: false
        - in: query
          name: limit
          description: default 값은 50으로 설정된다.
          schema:
            type: string
          required: false
      responses:
        '200':
          description: 정상적인 경우
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetCursoredClubQuestSummariesResultDTO'

  /clubQuests/create/dryRun:
    post:
      summary:
        주어진 조건(중심 위치, 반경, 퀘스트 분할 숫자 등)으로 퀘스트를 생성하면
        어떻게 생성될지 시뮬레이션하여 미리 확인한다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                regionType:
                  $ref: '#/components/schemas/ClubQuestCreateRegionTypeDTO'
                centerLocation:
                  $ref: '#/components/schemas/LocationDTO'
                radiusMeters:
                  type: integer
                points:
                  type: array
                  items:
                    $ref: '#/components/schemas/LocationDTO'
                clusterCount:
                  type: integer
                maxPlaceCountPerQuest:
                  type: integer
                useAlreadyCrawledPlace:
                  type: boolean
                  description: |
                    지도 API 기반이 아닌, 이미 크롤링하여 계단정복지도 서버 DB에 캐싱해둔 장소를 기반으로 퀘스트를 생성할지 여부.
                    지정되지 않은 경우, default는 false.
                questTargetPlaceCategories:
                  type: array
                  items:
                    $ref: '#/components/schemas/QuestTargetPlaceCategoryEnumDTO'
              required:
                - clusterCount
                - maxPlaceCountPerQuest
      responses:
        '200':
          description: 미리 확인에 성공해서 결과를 내려준다.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ClubQuestCreateDryRunResultItemDTO'

  /clubQuests/create:
    post:
      summary: dryRun 생성 결과를 받아서 실제로 퀘스트를 생성한다.
      operationId: createClubQuest
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                questNamePrefix:
                  type: string
                purposeType:
                  $ref: '#/components/schemas/ClubQuestPurposeTypeEnumDTO'
                startAt:
                  $ref: '#/components/schemas/EpochMillisTimestamp'
                endAt:
                  $ref: '#/components/schemas/EpochMillisTimestamp'
                isAttendanceCheckEnabled:
                  type: boolean
                  description: 출석체크 가능 여부
                  default: true
                dryRunResults:
                  items:
                    $ref: '#/components/schemas/ClubQuestCreateDryRunResultItemDTO'
              required:
                - questNamePrefix
                - purposeType
                - startAt
                - endAt
                - dryRunResults
      responses:
        '200':
          description: 퀘스트 생성에 성공한 뒤 그 결과를 내려준다.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateClubQuestResponseDTO'

  /clubQuests/createAndNotifyDailyClubQuest:
    post:
      summary:
        구글 폼으로 입력 받은 정보를 기반으로 일상 퀘스트를 즉시 생성하고 알림을
        보낸다.
      operationId: createAndNotifyDailyClubQuest
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAndNotifyDailyClubQuestRequestDTO'
      responses:
        '200':
          description: 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateAndNotifyDailyClubQuestResponseDTO'

  /clubQuests/byGroup/{groupId}:
    get:
      summary: groupId로 해당 그룹의 모든 퀘스트를 조회한다.
      operationId: getClubQuestsByGroupId
      parameters:
        - in: path
          name: groupId
          schema:
            type: string
          required: true
          description: 퀘스트 그룹 식별자
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetClubQuestsByGroupIdResult'

  /clubQuests/{clubQuestId}:
    get:
      summary: 퀘스트를 조회한다.
      security: []
      parameters:
        - in: path
          name: clubQuestId
          schema:
            type: string
          required: true
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClubQuestDTO'
    delete:
      summary: 퀘스트를 삭제한다.
      parameters:
        - in: path
          name: clubQuestId
          schema:
            type: string
          required: true
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /clubQuests/{clubQuestId}/isClosed:
    put:
      summary: 점포의 폐점 여부를 저장한다.
      security: []
      parameters:
        - in: path
          name: clubQuestId
          schema:
            type: string
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                buildingId:
                  type: string
                placeId:
                  type: string
                isClosed:
                  type: boolean
              required:
                - buildingId
                - placeId
                - isClosed
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /clubQuests/{clubQuestId}/isNotAccessible:
    put:
      summary: 점포의 접근 가능 여부를 저장한다.
      security: []
      parameters:
        - in: path
          name: clubQuestId
          schema:
            type: string
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                buildingId:
                  type: string
                placeId:
                  type: string
                isNotAccessible:
                  type: boolean
              required:
                - buildingId
                - placeId
                - isNotAccessible
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /clubQuests/{clubQuestId}/targetPlaces:
    delete:
      summary: 퀘스트에서 특정 장소를 제외한다.
      parameters:
        - in: path
          name: clubQuestId
          schema:
            type: string
          required: true
        - in: query # buildingId와 패턴을 맞춘다.
          name: placeId
          schema:
            type: string
          required: true
      responses:
        '200':
          description: 장소 제외 성공.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClubQuestDTO'

  /clubQuests/{clubQuestId}/targetPlaces/move:
    post:
      summary: 특정 장소들을 다른 퀘스트로 이동한다.
      operationId: moveClubQuestTargetPlace
      parameters:
        - in: path
          name: clubQuestId
          schema:
            type: string
          required: true
          description: 원본 퀘스트 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MoveClubQuestTargetPlaceRequest'
      responses:
        '200':
          description: 장소 이동 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MoveClubQuestTargetPlaceResponse'

  /clubQuests/{clubQuestId}/targetBuildings:
    delete:
      summary: 퀘스트에서 특정 건물을 제외한다.
      parameters:
        - in: path
          name: clubQuestId
          schema:
            type: string
          required: true
        - in: query
          name: buildingId
          schema:
            type: string
          required: true
      responses:
        '200':
          description: 건물 제외 성공.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClubQuestDTO'

  /accessibilityAllowedRegions:
    post:
      summary: 정보 등록 가능 지역을 생성한다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAccessibilityAllowedRegionRequestDTO'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

    get:
      summary: 정보 등록 가능 지역 목록을 조회한다.
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AccessibilityAllowedRegionDTO'

  /accessibilityAllowedRegions/{regionId}:
    parameters:
      - in: path
        name: regionId
        schema:
          type: string
        required: true

    get:
      summary: 정보 등록 가능 지역을 조회한다.
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccessibilityAllowedRegionDTO'

    delete:
      summary: 정보 등록 가능 지역을 삭제한다.
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /challenges:
    get:
      summary: 챌린지 목록을 조회한다.
      tags:
        - challenge
      responses:
        '200':
          description: 챌린지 목록 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminListChallengesResponseDTO'

    post:
      summary: 챌린지를 생성한다.
      tags:
        - challenge
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreateChallengeRequestDTO'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /challenges/{challengeId}:
    parameters:
      - in: path
        name: challengeId
        schema:
          type: string
        required: true

    get:
      summary: 챌린지를 조회한다.
      tags:
        - challenge
      responses:
        '200':
          description: 챌린지 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminChallengeDTO'

    put:
      summary: 챌린지를 업데이트한다.
      tags:
        - challenge
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdateChallengeRequestDTO'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

    delete:
      summary: 챌린지를 삭제한다.
      tags:
        - challenge
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /accessibilities/search:
    get:
      parameters:
        - in: query
          name: placeName
          schema:
            type: string
          required: false
        - in: query
          name: createdAtFromLocalDate
          description: yyyy-MM-dd 형식
          schema:
            type: string
          required: false
        - in: query
          name: createdAtToLocalDate
          description: yyyy-MM-dd 형식
          schema:
            type: string
          required: false
        - in: query
          name: cursor
          schema:
            type: string
          required: false
        - in: query
          name: limit
          description: default 값은 20으로 설정된다.
          schema:
            type: string
          required: false
      operationId: searchAccessibilities
      summary: 장소 & 건물 정보를 검색한다.
      tags:
        - accessibility
      responses:
        '200':
          description: 검색 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminSearchAccessibilitiesResultDTO'

  /accessibility-inspection-results/search:
    get:
      parameters:
        - in: query
          name: id
          schema:
            type: string
          required: false
        - in: query
          name: accessibilityType
          schema:
            $ref: '#/components/schemas/AccessibilityTypeDTO'
          required: false
        - in: query
          name: inspectorType
          schema:
            $ref: '#/components/schemas/InspectorTypeDTO'
          required: false
        - in: query
          name: resultType
          schema:
            $ref: '#/components/schemas/ResultTypeDTO'
          required: false
        - in: query
          name: isHandled
          schema:
            type: boolean
          required: false
        - in: query
          name: createdAtFrom
          description: 검색 시작 시각 (epoch milliseconds, inclusive)
          schema:
            type: integer
            format: int64
          required: false
        - in: query
          name: createdAtTo
          description: 검색 종료 시각 (epoch milliseconds, exclusive)
          schema:
            type: integer
            format: int64
          required: false
        - in: query
          name: cursor
          schema:
            type: string
          required: false
        - in: query
          name: limit
          description: default 값은 20으로 설정된다.
          schema:
            type: string
          required: false
      operationId: searchAccessibilityInspectionResults
      summary: 접근성 이미지 검증 결과를 검색한다.
      tags:
        - accessibility
      responses:
        '200':
          description: 검색 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminSearchAccessibilityInspectionResultsDTO'

  /place-accessibilities/{id}:
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true

    put:
      operationId: updatePlaceAccessibility
      summary: 장소 정보를 업데이트한다.
      tags:
        - accessibility
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdatePlaceAccessibilityRequestDTO'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

    delete:
      operationId: deletePlaceAccessibility
      summary: 장소 정보를 삭제한다.
      tags:
        - accessibility
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /building-accessibilities/{id}:
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true

    put:
      operationId: updateBuildingAccessibility
      summary: 건물 정보를 업데이트한다.
      tags:
        - accessibility
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdateBuildingAccessibilityRequestDTO'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

    delete:
      operationId: deleteBuildingAccessibility
      summary: 건물 정보를 삭제한다.
      tags:
        - accessibility
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /accessibility/run-image-pipeline:
    post:
      operationId: runAccessibilityImagePipeline
      summary: 접근성 정보의 이미지 파이프라인을 실행한다.
      tags:
        - accessibility
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                items:
                  type: array
                  items:
                    type: object
                    properties:
                      accessibilityId:
                        type: string
                      accessibilityType:
                        $ref: '#/components/schemas/AccessibilityTypeDTO'
                    required:
                      - accessibilityId
                      - accessibilityType
              required:
                - items
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '400':
          description: 잘못된 요청 (빈 배열 등)
        '404':
          description: 일부 접근성 정보를 찾을 수 없음

  /accessibility-inspection-results/apply:
    post:
      operationId: applyAccessibilityInspectionResults
      summary: 접근성 이미지 검증 결과를 일괄로 반영한다.
      description: |
        검수 결과 목록을 실제 접근성 정보에 일괄 반영합니다.
        - DELETE: 접근성 정보를 hard delete (관련 데이터 및 도메인 이벤트 포함)
        - MODIFY: PlaceAccessibility를 수정 요청에 따라 업데이트
        - OK: 아무 작업도 하지 않음

        이미 반영된 검수 결과(handledAt != null)는 중복 처리하지 않습니다.
        각 검수 결과는 개별 트랜잭션으로 처리되어, 일부 실패해도 다른 결과는 계속 처리됩니다.

        ## 두 가지 모드 지원:
        1. **ID 기반 모드**: `inspectionResultIds` 배열을 제공하여 특정 검수 결과들을 반영
        2. **필터 기반 모드**: `filter` 객체를 제공하여 조건에 맞는 모든 미처리 검수 결과를 반영

        두 모드는 상호 배타적이며, 둘 중 하나만 제공해야 합니다.
      tags:
        - accessibility
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApplyAccessibilityInspectionResultsRequestDto'
      responses:
        '200':
          description: 검수 결과 반영 완료
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplyAccessibilityInspectionResultSummaryResponseDto'
        '400':
          description:
            잘못된 요청 (빈 배열, 두 모드 동시 제공, 아무것도 제공하지 않음 등)

  /accessibility-inspection-results/human/bulk-import:
    post:
      operationId: bulkImportHumanInspections
      summary: CSV 파일을 업로드하여 인간 검수 결과를 일괄 등록한다.
      description: |
        Korean inspection sheet format (30 columns) CSV 파일을 업로드하여 인간 검수 결과를 일괄로 등록합니다.
        100개 이하의 레코드는 동기 처리되며, 100개 초과시 비동기로 처리됩니다.

        CSV 포맷:
        - 30개 컬럼의 한국어 검수 시트 형식
        - Column 0: 장소 id (accessibilityId)
        - Column 15: 판정 (status: "정상"=PASS, "삭제 대상"=FAIL, "수정 대상"=MODIFY)
        - Column 16: (선택) 추가 의견 (comment)
        - Column 9: 코멘트 (reason - original comment)
        - Columns 20-25: Modification request (1층 여부, 층 수, 계단 개수, 계단 높이, 경사로 유무, 문 유형)
        - Column 29: 검수자 (inspector name)
      tags:
        - accessibility
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: CSV 파일
              required:
                - file
      responses:
        '200':
          description: 동기 처리 완료 (100개 이하의 레코드)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BulkImportHumanInspectionResponseDTO'
        '202':
          description: 비동기 처리 시작됨 (100개 초과의 레코드)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BulkImportHumanInspectionResponseDTO'
        '400':
          description: 잘못된 요청 (빈 파일, CSV 형식 오류 등)

  /places/startCrawling:
    post:
      operationId: startPlaceCrawling
      summary:
        지정된 지역 내의 장소를 지도 API를 통해 크롤링해서 계단정복지도 서버
        DB에 캐싱한다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StartPlaceCrawlingRequestDTO'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /places/searchPresets:
    get:
      operationId: getSearchPreset
      summary: 등록된 모든 추천 검색어를 가져온다.
      responses:
        '200':
          description: 검색어 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  presets:
                    type: array
                    items:
                      $ref: '#/components/schemas/AdminSearchPlacePresetDTO'
                required:
                  - presets
    post:
      operationId: createSearchPreset
      summary: 추천 검색어를 등록한다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreateSearchPlacePresetRequestDTO'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /places/searchPresets/{id}:
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true

    delete:
      operationId: deleteSearchPreset
      summary: 등록된 추천 검색어를 삭제한다.
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /closed-place-candidates:
    get:
      operationId: listClosedPlaceCandidates
      summary: 폐업이 추정되는 장소의 리스트를 조회한다.
      parameters:
        - in: query
          name: isAccessibilityRegistered
          schema:
            type: boolean
          required: false
        - in: query
          name: cursor
          schema:
            type: string
          required: false
        - in: query
          name: limit
          description: default 값은 50으로 설정된다.
          schema:
            type: string
          required: false
      responses:
        '200':
          description: 목록 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminListClosedPlaceCandidatesResponseDTO'

  /closed-place-candidates/{id}:
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true

    get:
      operationId: getClosedPlaceCandidate
      summary: 폐업이 추정되는 장소를 조회한다.
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminClosedPlaceCandidateDTO'

  /closed-place-candidates/{id}/accept:
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
    put:
      operationId: acceptClosedPlaceCandidate
      summary: 해당 장소를 폐업 상태로 변경한다.
      responses:
        '200':
          description: 상태 변경 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminClosedPlaceCandidateDTO'

  /closed-place-candidates/{id}/ignore:
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true

    put:
      operationId: ignoreClosedPlaceCandidate
      summary: 해당 장소를 폐업의 폐업 추정을 무시한다.
      responses:
        '200':
          description: 상태 변경 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminClosedPlaceCandidateDTO'

  /building-divisions:
    get:
      summary: Building Division 목록을 조회한다.
      operationId: listBuildingDivisions
      tags:
        - building-division
      parameters:
        - in: query
          name: status
          schema:
            $ref: '#/components/schemas/AdminBuildingDivisionStatusDTO'
          required: false
          description: 상태별 필터링 (미지정시 전체)
        - in: query
          name: limit
          schema:
            type: integer
          required: false
          description: 페이지당 항목 수 (기본값 20)
        - in: query
          name: cursor
          schema:
            type: string
          required: false
          description: 커서 페이지네이션용 커서 값
      responses:
        '200':
          description: Building Division 목록 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminListBuildingDivisionsResponseDTO'

    post:
      summary: 새로운 Building Division을 생성한다.
      operationId: createBuildingDivision
      tags:
        - building-division
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreateBuildingDivisionRequestDTO'
      responses:
        '200':
          description: Building Division 생성 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminBuildingDivisionDTO'

  /building-divisions/{divisionId}:
    get:
      summary: Building Division 상세 정보를 조회한다.
      operationId: getBuildingDivision
      tags:
        - building-division
      parameters:
        - in: path
          name: divisionId
          required: true
          schema:
            type: string
          description: Building Division ID
      responses:
        '200':
          description: Building Division 상세 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminBuildingDivisionDetailDTO'

  /building-divisions/{divisionId}/sub-buildings:
    post:
      summary: Building Division에 SubBuilding을 추가한다.
      operationId: createSubBuilding
      tags:
        - building-division
      parameters:
        - in: path
          name: divisionId
          required: true
          schema:
            type: string
          description: Building Division ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreateSubBuildingRequestDTO'
      responses:
        '200':
          description: SubBuilding 생성 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminSubBuildingDTO'

  /building-divisions/{divisionId}/sub-buildings/{subBuildingId}:
    put:
      summary: SubBuilding 정보를 수정한다.
      operationId: updateSubBuilding
      tags:
        - building-division
      parameters:
        - in: path
          name: divisionId
          required: true
          schema:
            type: string
          description: Building Division ID
        - in: path
          name: subBuildingId
          required: true
          schema:
            type: string
          description: SubBuilding ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdateSubBuildingRequestDTO'
      responses:
        '200':
          description: SubBuilding 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminSubBuildingDTO'

    delete:
      summary: SubBuilding을 삭제한다.
      operationId: deleteSubBuilding
      tags:
        - building-division
      parameters:
        - in: path
          name: divisionId
          required: true
          schema:
            type: string
          description: Building Division ID
        - in: path
          name: subBuildingId
          required: true
          schema:
            type: string
          description: SubBuilding ID
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /building-divisions/{divisionId}/confirm:
    post:
      summary: Building Division을 확정한다.
      operationId: confirmBuildingDivision
      tags:
        - building-division
      parameters:
        - in: path
          name: divisionId
          required: true
          schema:
            type: string
          description: Building Division ID
      responses:
        '200':
          description: Building Division 확정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminBuildingDivisionDTO'

  /building-divisions/{divisionId}/ignore:
    post:
      summary: Building Division을 무시한다.
      operationId: ignoreBuildingDivision
      tags:
        - building-division
      parameters:
        - in: path
          name: divisionId
          required: true
          schema:
            type: string
          description: Building Division ID
      responses:
        '200':
          description: Building Division 무시 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminBuildingDivisionDTO'

  /building-divisions/{divisionId}/assign-places-to-sub-buildings:
    post:
      summary: Building Division의 Place들을 SubBuilding에 할당한다.
      operationId: assignPlacesToSubBuildings
      tags:
        - building-division
      parameters:
        - in: path
          name: divisionId
          required: true
          schema:
            type: string
          description: Building Division ID
      responses:
        '200':
          description: Place 할당 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminAssignPlacesToSubBuildingsResponseDTO'

  /banners:
    get:
      operationId: adminAllListBanners
      summary: 전체 배너 목록을 조회한다.
      tags:
        - banner
      responses:
        '200':
          description: 배너 목록 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminListAllBannersResponseDTO'

    post:
      operationId: adminCreateBanner
      summary: 배너를 생성한다.
      tags:
        - banner
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreateBannerRequestDTO'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /banners/home-banner:
    get:
      operationId: adminListHomeBanners
      summary: 앱의 홈에 노출되는 것과 동일한 목록 & 순서의 배너를 보여준다.
      tags:
        - banner
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminListHomeBannersResponseDTO'

  /banners/{id}:
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true

    delete:
      operationId: adminDeleteBanner
      summary: 배너를 삭제한다.
      tags:
        - banner
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /home-announcements:
    get:
      operationId: adminListHomeAnnouncements
      summary: 홈 공지사항 목록을 조회한다.
      tags:
        - home-announcement
      responses:
        '200':
          description: 공지사항 목록 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminListHomeAnnouncementsResponseDTO'

    post:
      operationId: adminCreateHomeAnnouncement
      summary: 홈 공지사항을 생성한다.
      tags:
        - home-announcement
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreateHomeAnnouncementRequestDTO'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /home-announcements/{id}:
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true

    delete:
      operationId: adminDeleteHomeAnnouncement
      summary: 홈 공지사항을 삭제한다.
      tags:
        - home-announcement
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /home-recommended-contents:
    get:
      operationId: adminListHomeRecommendedContents
      summary: 홈 추천 컨텐츠 목록을 조회한다.
      tags:
        - home-recommended-content
      responses:
        '200':
          description: 추천 컨텐츠 목록 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminListHomeRecommendedContentsResponseDTO'

    post:
      operationId: adminCreateHomeRecommendedContent
      summary: 홈 추천 컨텐츠를 생성한다.
      tags:
        - home-recommended-content
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreateHomeRecommendedContentRequestDTO'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /home-recommended-contents/{id}:
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true

    delete:
      operationId: adminDeleteHomeRecommendedContent
      summary: 홈 추천 컨텐츠를 삭제한다.
      tags:
        - home-recommended-content
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /image-upload-urls:
    post:
      summary: 배너 생성 등의 상황에서 이미지를 업로드하기 위한 URL을 받아 온다.
      operationId: adminCreateImageUploadUrls
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreateImageUploadUrlsRequestDTO'
      responses:
        '200':
          description: 이미지 업로드용 url 을 내려준다.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminCreateImageUploadUrlsResponseDTO'

  /notifications/sendPush:
    post:
      summary: 유저들에게 push notification을 보낸다.
      operationId: adminSendPushNotification
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminSendPushNotificationRequestDTO'
      responses:
        '200':
          $ref: '#/components/responses/NoContent'

  /notifications/pushSchedules:
    get:
      summary: 커서링 방식의 푸시 알림 조회.
      operationId: adminGetPushSchedules
      description: 푸시 알림 스케쥴을 커서링 방식으로 조회한다.
      parameters:
        - in: query
          name: cursor
          schema:
            type: string
          required: false
        - in: query
          name: limit
          description: default 값은 50으로 설정된다.
          schema:
            type: string
          required: false
      responses:
        '200':
          description: 정상적인 경우
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminListPushNotificationSchedulesResponseDTO'

  /notifications/pushSchedules/{scheduleId}:
    get:
      summary: 푸시 알림 스케쥴을 조회한다.
      parameters:
        - in: path
          name: scheduleId
          schema:
            type: string
          required: true
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminPushNotificationScheduleDTO'

    put:
      summary: 푸시 알림 스케쥴을 수정한다.
      parameters:
        - in: path
          name: scheduleId
          schema:
            type: string
          required: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdatePushNotificationScheduleRequestDTO'
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

    delete:
      summary: 푸시 알림 스케쥴을 삭제한다.
      parameters:
        - in: path
          name: scheduleId
          schema:
            type: string
          required: true
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /bbucle-road-pages:
    get:
      summary: 뿌클로드 페이지 목록을 조회한다.
      operationId: listBbucleRoadPages
      tags:
        - bbucle-road
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/BbucleRoadPageDTO'

    post:
      summary: 뿌클로드 페이지를 생성한다.
      operationId: createBbucleRoadPage
      tags:
        - bbucle-road
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBbucleRoadPageRequestDTO'
      responses:
        '200':
          description: 생성 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BbucleRoadPageDTO'

  /bbucle-road-pages/{id}:
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true

    get:
      summary: 뿌클로드 페이지를 조회한다.
      operationId: getBbucleRoadPage
      tags:
        - bbucle-road
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BbucleRoadPageDTO'

    put:
      summary: 뿌클로드 페이지를 수정한다.
      operationId: updateBbucleRoadPage
      tags:
        - bbucle-road
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateBbucleRoadPageRequestDTO'
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BbucleRoadPageDTO'

    delete:
      summary: 뿌클로드 페이지를 삭제한다.
      operationId: deleteBbucleRoadPage
      tags:
        - bbucle-road
      responses:
        '204':
          $ref: '#/components/responses/NoContent'

  /place-lists:
    get:
      summary: 저장 리스트 목록을 조회한다. NORMAL 타입만 조회한다.
      operationId: listPlaceLists
      tags:
        - place-list
      parameters:
        - in: query
          name: cursor
          schema:
            type: string
          required: false
          description: 페이지네이션 커서
        - in: query
          name: limit
          schema:
            type: integer
          required: false
          description: 페이지당 항목 수 (기본값 20)
      responses:
        '200':
          description: 목록 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminListPlaceListsResponseDto'

    post:
      summary: 저장 리스트를 생성한다.
      operationId: createPlaceList
      tags:
        - place-list
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreatePlaceListRequestDto'
      responses:
        '200':
          description: 생성 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminPlaceListDetailDto'

  /place-lists/{id}:
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: PlaceList ID

    get:
      summary: 저장 리스트 상세를 조회한다.
      operationId: getPlaceList
      tags:
        - place-list
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminPlaceListDetailDto'
        '404':
          description: 해당 ID의 리스트를 찾을 수 없음

    put:
      summary: 저장 리스트를 수정한다.
      operationId: updatePlaceList
      tags:
        - place-list
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdatePlaceListRequestDto'
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminPlaceListDetailDto'
        '404':
          description: 해당 ID의 리스트를 찾을 수 없음

    delete:
      summary: 저장 리스트를 삭제한다.
      operationId: deletePlaceList
      tags:
        - place-list
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '404':
          description: 해당 ID의 리스트를 찾을 수 없음

  /places/search:
    post:
      summary: 키워드로 장소를 검색한다.
      operationId: searchPlacesByKeyword
      tags:
        - place-list
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminSearchPlacesByKeywordRequestDto'
      responses:
        '200':
          description: 검색 결과
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminSearchPlacesByKeywordResponseDto'

  /place-category-caches:
    get:
      summary: 장소 카테고리 캐시 목록을 조회한다.
      operationId: listPlaceCategoryCaches
      tags:
        - place-category-cache
      parameters:
        - in: query
          name: cursor
          schema:
            type: string
          required: false
          description: 페이지네이션 커서
        - in: query
          name: limit
          schema:
            type: integer
          required: false
          description: 페이지당 항목 수 (기본값 20)
        - in: query
          name: placeCategory
          schema:
            $ref: '#/components/schemas/PlaceCategoryDto'
          required: false
          description: 카테고리별 필터링
        - in: query
          name: categoryStringContains
          schema:
            type: string
          required: false
          description: categoryString 검색 (포함 검색)
      responses:
        '200':
          description: 목록 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminListPlaceCategoryCachesResponseDto'

    post:
      summary: 장소 카테고리 캐시를 수동으로 생성한다.
      operationId: createPlaceCategoryCache
      tags:
        - place-category-cache
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminCreatePlaceCategoryCacheRequestDto'
      responses:
        '200':
          description: 생성 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminPlaceCategoryCacheDto'
        '409':
          description: 이미 동일한 categoryString이 존재함

  /place-category-caches/{id}:
    parameters:
      - in: path
        name: id
        schema:
          type: string
        required: true
        description: PlaceCategoryCache ID

    get:
      summary: 장소 카테고리 캐시를 단건 조회한다.
      operationId: getPlaceCategoryCache
      tags:
        - place-category-cache
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminPlaceCategoryCacheDto'
        '404':
          description: 해당 ID의 캐시를 찾을 수 없음

    put:
      summary: 장소 카테고리 캐시를 수정한다.
      operationId: updatePlaceCategoryCache
      tags:
        - place-category-cache
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUpdatePlaceCategoryCacheRequestDto'
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminPlaceCategoryCacheDto'
        '404':
          description: 해당 ID의 캐시를 찾을 수 없음

    delete:
      summary: 장소 카테고리 캐시를 삭제한다. 삭제 후 다음 조회시 AI가 다시 카테고리를 판정한다.
      operationId: deletePlaceCategoryCache
      tags:
        - place-category-cache
      responses:
        '204':
          $ref: '#/components/responses/NoContent'
        '404':
          description: 해당 ID의 캐시를 찾을 수 없음

components:
  # Reusable schemas (data models)
  securitySchemes:
    Admin:
      type: http
      scheme: bearer

  schemas:
    EpochMillisTimestamp:
      description: 특정 시각을 표현하기 위한 모델.
      type: object
      properties:
        value:
          type: integer
          format: int64
      required:
        - value

    LocationDTO:
      description: 위치를 위경도로 표현하기 위한 모델.
      type: object
      properties:
        lng:
          type: number
          format: double
        lat:
          type: number
          format: double
      required:
        - lng
        - lat

    ClubQuestCreateRegionTypeDTO:
      type: string
      enum:
        - CIRCLE
        - POLYGON

    ChallengeAggregationPeriodTypeEnum:
      type: string
      enum:
        - ALL_TIME
        - MONTHLY

    QuestTargetPlaceCategoryEnumDTO:
      type: string
      enum:
        - RESTAURANT
        - CAFE
        - MARKET
        - HOSPITAL
        - PHARMACY
        - CONVENIENCE_STORE

    ClubQuestCreateDryRunResultItemDTO:
      description:
        퀘스트 생성 시뮬레이션 결과. 각 퀘스트마다 1개의 아이템이 반환된다.
      properties:
        questNamePostfix:
          type: string
        questCenterLocation:
          $ref: '#/components/schemas/LocationDTO'
        targetBuildings:
          type: array
          items:
            $ref: '#/components/schemas/ClubQuestTargetBuildingDTO'
      required:
        - questNamePostfix
        - questCenterLocation
        - targetBuildings

    ClubQuestPurposeTypeEnumDTO:
      type: string
      enum:
        - CRUSHER_CLUB
        - DAILY_CLUB
        - COLLABO_CLUB
        - ESG_PARTNERS

    GetCursoredClubQuestSummariesResultDTO:
      type: object
      properties:
        list:
          type: array
          items:
            $ref: '#/components/schemas/ClubQuestSummaryDTO'
        cursor:
          type: string
          description: 없으면 다음 페이지가 없다는 의미.
      required:
        - list

    ClubQuestSummaryDTO:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        purposeType:
          $ref: '#/components/schemas/ClubQuestPurposeTypeEnumDTO'
        startAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        endAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        shortenedUrl:
          type: string
        groupId:
          type: string
      required:
        - id
        - name
        - purposeType
        - startAt
        - endAt

    ClubQuestDTO:
      description: 퀘스트.
      properties:
        id:
          type: string
        name:
          type: string
        groupId:
          type: string
          description:
            퀘스트 그룹 식별자 (dryRun 배치 단위). 같은 groupId를 가진
            퀘스트들은 동일한 배치로 생성됨.
        purposeType:
          $ref: '#/components/schemas/ClubQuestPurposeTypeEnumDTO'
        startAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        endAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        buildings:
          type: array
          items:
            $ref: '#/components/schemas/ClubQuestTargetBuildingDTO'
        shortenedUrl:
          type: string
        isAttendanceCheckEnabled:
          type: boolean
          description: 출석체크 가능 여부
      required:
        - id
        - name
        - purposeType
        - startAt
        - endAt
        - buildings

    ClubQuestTargetBuildingDTO:
      description: 퀘스트 대상이 되는 건물 정보.
      properties:
        buildingId:
          type: string
        name:
          type: string
        location:
          $ref: '#/components/schemas/LocationDTO'
        places:
          type: array
          items:
            $ref: '#/components/schemas/ClubQuestTargetPlaceDTO'
      required:
        - buildingId
        - name
        - location
        - places

    ClubQuestTargetPlaceDTO:
      description: 퀘스트 대상이 되는 점포 정보.
      properties:
        placeId:
          type: string
          description: 점포의 ID.
        buildingId:
          type: string
          description: 건물의 ID.
        name:
          type: string
          description: 점포의 human-readable한 이름.
        location:
          $ref: '#/components/schemas/LocationDTO'
        isConquered:
          type: boolean
          description: 장소가 정복됐는지 여부.
        isClosedExpected:
          type: boolean
          description: 장소가 폐업으로 추정되는지 여부.
        isClosed:
          type: boolean
          description: 장소가 실제로 폐업됐는지 여부.
        isNotAccessible:
          type: boolean
          description: 장소에 접근 가능한지 여부.
      required:
        - name
        - location
        - placeId
        - buildingId
        - isConquered
        - isClosedExpected
        - isClosed
        - isNotAccessible

    GetClubQuestsByGroupIdResult:
      description: groupId로 조회한 퀘스트 목록
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/ClubQuestDTO'
      required:
        - items

    MoveClubQuestTargetPlaceRequest:
      description: 장소 이동 요청
      properties:
        targetQuestId:
          type: string
          description: 이동 대상 퀘스트 ID
        placeIds:
          type: array
          items:
            type: string
          description: 이동할 장소 ID 목록
      required:
        - targetQuestId
        - placeIds

    MoveClubQuestTargetPlaceResponse:
      description: 장소 이동 응답
      properties:
        sourceQuest:
          $ref: '#/components/schemas/ClubQuestDTO'
          description: 원본 퀘스트 (장소가 제거됨)
        targetQuest:
          $ref: '#/components/schemas/ClubQuestDTO'
          description: 대상 퀘스트 (장소가 추가됨)
      required:
        - sourceQuest
        - targetQuest

    CreateClubQuestResponseDTO:
      properties:
        clubQuestIds:
          type: array
          items:
            type: string
      required:
        - clubQuestIds

    CreateAndNotifyDailyClubQuestRequestDTO:
      type: object
      properties:
        requesterName:
          type: string
        requesterPhoneNumber:
          type: string
        centerLocationPlaceName:
          type: string
        maxPlaceCountPerQuest:
          type: string
      required:
        - requesterName
        - requesterPhoneNumber
        - centerLocationPlaceName
        - maxPlaceCountPerQuest

    CreateAndNotifyDailyClubQuestResponseDTO:
      type: object
      properties:
        clubQuestId:
          type: string
        url:
          type: string
      required:
        - clubQuestId
        - url

    CreateAccessibilityAllowedRegionRequestDTO:
      properties:
        name:
          type: string
        boundaryVertices:
          type: array
          items:
            $ref: '#/components/schemas/LocationDTO'
      required:
        - name
        - boundaryVertices

    AccessibilityAllowedRegionDTO:
      properties:
        id:
          type: string
        name:
          type: string
        boundaryVertices:
          type: array
          items:
            $ref: '#/components/schemas/LocationDTO'
      required:
        - id
        - type
        - boundaryVertices

    AdminListChallengesResponseDTO:
      type: array
      items:
        $ref: '#/components/schemas/AdminChallengeDTO'

    AdminChallengeDTO:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        isPublic:
          type: boolean
        invitationCode:
          type: string
        passcode:
          type: string
        isComplete:
          type: boolean
        startsAtMillis:
          type: integer
          format: int64
        endsAtMillis:
          type: integer
          format: int64
        joinStartAtMillis:
          type: integer
          format: int64
        b2bGroupId:
          type: string
        goal:
          type: integer
          format: int32
        milestones:
          type: array
          items:
            type: integer
            format: int32
        conditions:
          type: array
          items:
            $ref: '#/components/schemas/AdminChallengeConditionDTO'
        createdAtMillis:
          type: integer
          format: int64
        updatedAtMillis:
          type: integer
          format: int64
        description:
          type: string
        isB2B:
          type: boolean
        b2bFormSchema:
          $ref: '#/components/schemas/AdminChallengeB2bFormSchemaDTO'
        crusherGroup:
          $ref: '#/components/schemas/AdminCrusherGroupDto'
        aggregationPeriodType:
          $ref: '#/components/schemas/ChallengeAggregationPeriodTypeEnum'
        lastMonthRankImageUrl:
          type: string
        modalImageUrl:
          type: string
        isRetroactiveContributionEnabled:
          type: boolean
          description:
            When enabled, past contributions within challenge period are applied
            on join
      required:
        - id
        - name
        - isPublic
        - isComplete
        - startsAtMillis
        - goal
        - milestones
        - conditions
        - createdAtMillis
        - updatedAtMillis
        - description

    AdminChallengeConditionDTO:
      type: object
      properties:
        addressCondition:
          $ref: '#/components/schemas/AdminChallengeAddressConditionDTO'
        actionCondition:
          $ref: '#/components/schemas/AdminChallengeActionConditionDTO'

    AdminChallengeAddressConditionDTO:
      type: object
      properties:
        rawEupMyeonDongs:
          type: array
          items:
            type: string

    AdminChallengeActionConditionDTO:
      type: object
      properties:
        types:
          type: array
          items:
            $ref: '#/components/schemas/AdminChallengeActionConditionTypeEnumDTO'

    AdminChallengeActionConditionTypeEnumDTO:
      type: string
      enum:
        - BUILDING_ACCESSIBILITY
        - BUILDING_ACCESSIBILITY_COMMENT
        - PLACE_ACCESSIBILITY
        - PLACE_ACCESSIBILITY_COMMENT
        - PLACE_REVIEW

    AdminCreateChallengeRequestDTO:
      type: object
      properties:
        name:
          type: string
        isPublic:
          type: boolean
        invitationCode:
          type: string
        passcode:
          type: string
        companyName:
          type: string
        startsAtMillis:
          type: integer
          format: int64
        endsAtMillis:
          type: integer
          format: int64
        joinStartAtMillis:
          type: integer
          format: int64
        b2bGroupId:
          type: string
        goal:
          type: integer
          format: int32
        milestones:
          type: array
          items:
            type: integer
            format: int32
        conditions:
          type: array
          items:
            $ref: '#/components/schemas/AdminChallengeConditionDTO'
        description:
          type: string
        isB2B:
          type: boolean
        b2bFormSchema:
          $ref: '#/components/schemas/AdminChallengeB2bFormSchemaDTO'
        crusherGroup:
          $ref: '#/components/schemas/AdminCrusherGroupDto'
        aggregationPeriodType:
          $ref: '#/components/schemas/ChallengeAggregationPeriodTypeEnum'
        lastMonthRankImageUrl:
          type: string
        modalImageUrl:
          type: string
        isRetroactiveContributionEnabled:
          type: boolean
          description:
            When enabled, past contributions within challenge period are applied
            on join
      required:
        - name
        - isPublic
        - startsAtMillis
        - goal
        - milestones
        - conditions
        - description

    AdminCrusherGroupDto:
      type: object
      properties:
        name:
          type: string
        icon:
          type: object
          properties:
            url:
              type: string
            width:
              type: integer
            height:
              type: integer
          required:
            - url
            - width
            - height
      required:
        - name

    AdminSearchAccessibilitiesResultDTO:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/AdminAccessibilityDTO'
        cursor:
          type: string
          description: 없으면 다음 페이지가 없다는 의미.
      required:
        - items

    AdminSearchAccessibilityInspectionResultsDTO:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/AdminAccessibilityInspectionResultDTO'
        cursor:
          type: string
          description: 없으면 다음 페이지가 없다는 의미.
      required:
        - items

    AdminAccessibilityInspectionResultDTO:
      type: object
      properties:
        id:
          type: string
        accessibilityId:
          type: string
        accessibilityType:
          $ref: '#/components/schemas/AccessibilityTypeDTO'
        inspectorId:
          type: string
        inspectorType:
          $ref: '#/components/schemas/InspectorTypeDTO'
        resultType:
          $ref: '#/components/schemas/ResultTypeDTO'
        contents:
          type: string
          description: '검증 결과 내용 (JSON)'
        images:
          type: array
          items:
            $ref: '#/components/schemas/AdminImageDTO'
        accessibilityName:
          type: string
          nullable: true
          description:
            '접근성 대상의 이름 (Place인 경우 장소명, Building인 경우 건물명)'
        handledAtMillis:
          type: integer
          format: int64
          nullable: true
        applyState:
          allOf:
            - $ref: '#/components/schemas/ApplyStateDto'
          nullable: true
          description: 검수 결과 반영 상태 (APPLIED, ERROR)
        createdAtMillis:
          type: integer
          format: int64
        updatedAtMillis:
          type: integer
          format: int64
      required:
        - id
        - accessibilityId
        - accessibilityType
        - inspectorId
        - inspectorType
        - resultType
        - contents
        - images
        - createdAtMillis
        - updatedAtMillis

    BulkImportHumanInspectionResponseDTO:
      type: object
      properties:
        message:
          type: string
          description: 처리 상태 메시지
        totalRecords:
          type: integer
          description: CSV 파일의 전체 레코드 수
        parsedCount:
          type: integer
          description: 파싱에 성공한 레코드 수
        parseErrors:
          type: integer
          description: 파싱에 실패한 레코드 수
        successCount:
          type: integer
          nullable: true
          description: 등록에 성공한 레코드 수 (비동기 처리시 null)
        failureCount:
          type: integer
          nullable: true
          description: 등록에 실패한 레코드 수 (비동기 처리시 null)
        errors:
          type: array
          nullable: true
          items:
            type: string
          description: 실패한 레코드의 에러 메시지 목록 (비동기 처리시 null)
        asyncProcessing:
          type: boolean
          description: 비동기 처리 여부 (true면 백그라운드 처리중)
      required:
        - message
        - totalRecords
        - parsedCount
        - parseErrors
        - asyncProcessing

    InspectorTypeDTO:
      type: string
      enum:
        - HUMAN
        - AI
        - UNKNOWN

    ResultTypeDTO:
      type: string
      enum:
        - OK
        - MODIFY
        - DELETE
        - UNKNOWN

    ApplyStateDto:
      type: string
      description: 검수 결과 반영 상태
      enum:
        - APPLIED
        - ERROR

    ApplyAccessibilityInspectionResultResponseDto:
      type: object
      description: 접근성 검수 결과 반영 응답
      properties:
        appliedInspectionResultId:
          type: string
          description: 반영된 검수 결과 ID
        resultType:
          $ref: '#/components/schemas/ResultTypeDTO'
        appliedAction:
          $ref: '#/components/schemas/AppliedActionDto'
      required:
        - appliedInspectionResultId
        - resultType
        - appliedAction

    AppliedActionDto:
      type: string
      description: 검수 결과 반영 시 수행된 작업
      enum:
        - DELETED
        - MODIFIED
        - NO_ACTION_NEEDED
        - ERROR

    ApplyAccessibilityInspectionResultsRequestDto:
      type: object
      description: 접근성 검수 결과 반영 요청 (ID 기반 또는 필터 기반 모드)
      properties:
        inspectionResultIds:
          type: array
          items:
            type: string
          description: (ID 기반 모드) 반영할 검수 결과 ID 목록
          minItems: 1
        filter:
          $ref: '#/components/schemas/ApplyFilterDto'

    ApplyFilterDto:
      type: object
      description: 필터 기반 검수 결과 반영 조건
      properties:
        inspectorType:
          type: string
          enum:
            - AI
            - USER
            - BULK
          description: 검수자 유형 (선택)
        inspectorId:
          type: string
          description: 검수자 ID (선택)
        resultType:
          type: string
          enum:
            - OK
            - MODIFY
            - DELETE
            - UNKNOWN
          description: 검수 결과 유형 (선택)

    ApplyAccessibilityInspectionResultSummaryResponseDto:
      type: object
      description: 접근성 검수 결과 반영 응답 (ID 기반 및 필터 기반 모드 공통)
      properties:
        summary:
          $ref: '#/components/schemas/ApplySummaryDto'
      required:
        - summary

    ApplySummaryDto:
      type: object
      description: 검수 결과 반영 요약 정보
      properties:
        totalProcessed:
          type: integer
          format: int32
          description: 총 처리된 검수 결과 수
        successCount:
          type: integer
          format: int32
          description: 성공한 검수 결과 수
        failureCount:
          type: integer
          format: int32
          description: 실패한 검수 결과 수
      required:
        - totalProcessed
        - successCount
        - failureCount

    AccessibilityTypeDTO:
      type: string
      enum:
        - Place
        - Building
        - PlaceReview
        - ToiletReview
        - UNKNOWN

    AdminUpdateChallengeRequestDTO:
      type: object
      properties:
        name:
          type: string
        invitationCode:
          type: string
        passcode:
          type: string
        startsAtMillis:
          type: integer
          format: int64
        endsAtMillis:
          type: integer
          format: int64
        joinStartAtMillis:
          type: integer
          format: int64
        b2bGroupId:
          type: string
        goal:
          type: integer
          format: int32
        milestones:
          type: array
          items:
            type: integer
            format: int32
        conditions:
          type: array
          items:
            $ref: '#/components/schemas/AdminChallengeConditionDTO'
        description:
          type: string
        isB2B:
          type: boolean
        b2bFormSchema:
          $ref: '#/components/schemas/AdminChallengeB2bFormSchemaDTO'
        crusherGroup:
          $ref: '#/components/schemas/AdminCrusherGroupDto'
        aggregationPeriodType:
          $ref: '#/components/schemas/ChallengeAggregationPeriodTypeEnum'
        lastMonthRankImageUrl:
          type: string
        modalImageUrl:
          type: string
        isRetroactiveContributionEnabled:
          type: boolean
          description:
            When enabled, past contributions within challenge period are applied
            on join
      required:
        - name
        - description

    AdminUpdatePlaceAccessibilityRequestDTO:
      type: object
      properties:
        isFirstFloor:
          type: boolean
        stairInfo:
          $ref: '#/components/schemas/AdminStairInfoDTO'
        hasSlope:
          type: boolean
        floors:
          type: array
          items:
            type: integer
            format: int32
        isStairOnlyOption:
          type: boolean
        stairHeightLevel:
          $ref: '#/components/schemas/AdminStairHeightLevel'
        entranceDoorTypes:
          type: array
          items:
            $ref: '#/components/schemas/AdminEntranceDoorType'
      required:
        - isFirstFloor
        - stairInfo
        - hasSlope

    AdminUpdateBuildingAccessibilityRequestDTO:
      type: object
      properties:
        entranceStairInfo:
          $ref: '#/components/schemas/AdminStairInfoDTO'
        hasSlope:
          type: boolean
        hasElevator:
          type: boolean
        elevatorStairInfo:
          $ref: '#/components/schemas/AdminStairInfoDTO'
        entranceStairHeightLevel:
          $ref: '#/components/schemas/AdminStairHeightLevel'
        entranceDoorTypes:
          type: array
          items:
            $ref: '#/components/schemas/AdminEntranceDoorType'
        elevatorStairHeightLevel:
          $ref: '#/components/schemas/AdminStairHeightLevel'

      required:
        - entranceStairInfo
        - hasSlope
        - hasElevator
        - elevatorStairInfo

    AdminAccessibilityDTO:
      type: object
      properties:
        placeAccessibility:
          $ref: '#/components/schemas/AdminPlaceAccessibilityDTO'
        buildingAccessibility:
          $ref: '#/components/schemas/AdminBuildingAccessibilityDTO'
      required:
        - placeAccessibility

    AdminPlaceAccessibilityDTO:
      type: object
      properties:
        id:
          type: string
        floors:
          type: array
          items:
            type: integer
        isFirstFloor:
          type: boolean
        isStairOnlyOption:
          type: boolean
        imageUrls:
          deprecated: true
          type: array
          items:
            type: string
        images:
          type: array
          items:
            $ref: '#/components/schemas/AdminImageDTO'
        stairInfo:
          $ref: '#/components/schemas/AdminStairInfoDTO'
        stairHeightLevel:
          $ref: '#/components/schemas/AdminStairHeightLevel'
        hasSlope:
          type: boolean
        entranceDoorTypes:
          type: array
          items:
            $ref: '#/components/schemas/AdminEntranceDoorType'
        placeName:
          type: string
        registeredUserName:
          type: string
          description: 익명으로 등록되었으면 null.
        createdAtMillis:
          type: integer
          format: int64
      required:
        - id
        - isFirstFloor
        - stairInfo
        - hasSlope
        - placeName
        - imageUrls
        - images
        - createdAtMillis

    AdminBuildingAccessibilityDTO:
      type: object
      properties:
        id:
          type: string
        entranceStairInfo:
          $ref: '#/components/schemas/AdminStairInfoDTO'
        entranceStairHeightLevel:
          $ref: '#/components/schemas/AdminStairHeightLevel'
        entranceDoorTypes:
          type: array
          items:
            $ref: '#/components/schemas/AdminEntranceDoorType'
        entranceImageUrls:
          deprecated: true
          type: array
          items:
            type: string
        entranceImages:
          type: array
          items:
            $ref: '#/components/schemas/AdminImageDTO'
        hasSlope:
          type: boolean
        hasElevator:
          type: boolean
        elevatorStairInfo:
          $ref: '#/components/schemas/AdminStairInfoDTO'
        elevatorStairHeightLevel:
          $ref: '#/components/schemas/AdminStairHeightLevel'
        elevatorImageUrls:
          deprecated: true
          type: array
          items:
            type: string
        elevatorImages:
          type: array
          items:
            $ref: '#/components/schemas/AdminImageDTO'
        buildingName:
          type: string
        registeredUserName:
          type: string
          description: 익명으로 등록되었으면 null.
        createdAtMillis:
          type: integer
          format: int64
      required:
        - id
        - entranceStairInfo
        - entranceImageUrls
        - entranceImages
        - hasSlope
        - hasElevator
        - elevatorStairInfo
        - elevatorImageUrls
        - elevatorImages
        - createdAtMillis

    AdminStairInfoDTO:
      type: string
      enum:
        - UNDEFINED # e.g. 엘리베이터가 아예 없는 경우, 엘리베이터 계단 정보는 UNDEFINED로 올린다.
        - NONE
        - ONE
        - TWO_TO_FIVE
        - OVER_SIX

    AdminStairHeightLevel:
      type: string
      enum:
        - HALF_THUMB
        - THUMB
        - OVER_THUMB

    AdminEntranceDoorType:
      type: string
      enum:
        - None
        - Hinged
        - Sliding
        - Revolving
        - Automatic
        - ETC

    AdminImageDTO:
      type: object
      properties:
        imageUrl:
          type: string
        thumbnailUrl:
          type: string
      required:
        - imageUrl

    StartPlaceCrawlingRequestDTO:
      properties:
        boundaryVertices:
          type: array
          items:
            $ref: '#/components/schemas/LocationDTO'
      required:
        - boundaryVertices

    AdminListClosedPlaceCandidatesResponseDTO:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/AdminClosedPlaceCandidateDTO'
        cursor:
          type: string
          description: 없으면 다음 페이지가 없다는 의미.
          required:
            - list

    AdminClosedPlaceCandidateDTO:
      type: object
      properties:
        id:
          type: string
        placeId:
          type: string
        name:
          type: string
        address:
          type: string
        closedAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        acceptedAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        ignoredAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
      required:
        - id
        - placeId

    AdminBuildingDivisionStatusDTO:
      type: string
      enum:
        - PENDING
        - CONFIRMED
        - IGNORED
      description: |
        Building Division 상태
        - PENDING: 대기 중 (관리자 검토 필요)
        - CONFIRMED: 확정됨 (분할 필요, SubBuilding 관리 가능)
        - IGNORED: 무시됨 (분할 불필요)

    AdminBuildingDivisionDTO:
      type: object
      description: Building Division 정보
      properties:
        id:
          type: string
          description: Building Division ID
        buildingId:
          type: string
          description: 충돌이 발생한 Building ID
        buildingLocation:
          $ref: '#/components/schemas/LocationDTO'
          description: 건물 위치
        roadAddress:
          type: string
          description: 도로명 주소
        status:
          $ref: '#/components/schemas/AdminBuildingDivisionStatusDTO'
        divisionReason:
          type: string
          description: 분할 사유
        subBuildingsCount:
          type: integer
          description: 생성된 SubBuilding 개수
        confirmedAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
          description: 확정 시각
        ignoredAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
          description: 무시 시각
        createdAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
          description: 생성 시각
        updatedAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
          description: 수정 시각
      required:
        - id
        - buildingId
        - buildingLocation
        - roadAddress
        - status
        - createdAt
        - updatedAt

    AdminBuildingDivisionDetailDTO:
      type: object
      description: Building Division 상세 정보 (SubBuilding 목록 포함)
      properties:
        division:
          $ref: '#/components/schemas/AdminBuildingDivisionDTO'
        subBuildings:
          type: array
          items:
            $ref: '#/components/schemas/AdminSubBuildingDTO'
          description: SubBuilding 목록
      required:
        - division
        - subBuildings

    AdminListBuildingDivisionsResponseDTO:
      type: object
      description: Building Division 목록 조회 응답
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/AdminBuildingDivisionDTO'
          description: Building Division 목록
        cursor:
          type: string
          description: 없으면 다음 페이지가 없다는 의미.
      required:
        - items

    AdminCreateBuildingDivisionRequestDTO:
      type: object
      description: Building Division 생성 요청
      properties:
        buildingId:
          type: string
          description: 충돌이 발생한 Building ID
        divisionReason:
          type: string
          description: 분할 사유
      required:
        - buildingId

    AdminSubBuildingDTO:
      type: object
      description: SubBuilding 정보
      properties:
        id:
          type: string
          description: SubBuilding ID
        buildingDivisionId:
          type: string
          description: 소속된 Building Division ID
        subBuildingName:
          type: string
          description: |
            서브 건물 이름
            예: 연세대학교 신촌캠퍼스 대강당, 연세대학교 신촌캠퍼스 백양관
        centerLocation:
          $ref: '#/components/schemas/LocationDTO'
          description: 서브 건물 중심 위치
        boundaryWkt:
          type: string
          description: |
            서브 건물 경계 (WKT Polygon 형식)
            예: POLYGON((127.001 37.001, 127.002 37.001, 127.002 37.002, 127.001 37.002, 127.001 37.001))
        notes:
          type: string
          description: 메모
        confirmedAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
          description: 확정 시각
        createdAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
          description: 생성 시각
        updatedAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
          description: 수정 시각
      required:
        - id
        - buildingDivisionId
        - subBuildingName
        - centerLocation
        - boundaryWkt
        - createdAt
        - updatedAt

    AdminCreateSubBuildingRequestDTO:
      type: object
      description: SubBuilding 생성 요청
      properties:
        subBuildingName:
          type: string
          description: 서브 건물 이름
        centerLng:
          type: number
          format: double
          description: 서브 건물 중심 경도
        centerLat:
          type: number
          format: double
          description: 서브 건물 중심 위도
        boundaryWkt:
          type: string
          description: |
            서브 건물 경계 (WKT Polygon 형식)
            예: POLYGON((127.001 37.001, 127.002 37.001, 127.002 37.002, 127.001 37.002, 127.001 37.001))
        notes:
          type: string
          description: 메모
      required:
        - subBuildingName
        - centerLng
        - centerLat
        - boundaryWkt

    AdminUpdateSubBuildingRequestDTO:
      type: object
      description: SubBuilding 수정 요청
      properties:
        subBuildingName:
          type: string
          description: 서브 건물 이름
        centerLng:
          type: number
          format: double
          description: 서브 건물 중심 경도
        centerLat:
          type: number
          format: double
          description: 서브 건물 중심 위도
        boundaryWkt:
          type: string
          description: |
            서브 건물 경계 (WKT Polygon 형식)
            예: POLYGON((127.001 37.001, 127.002 37.001, 127.002 37.002, 127.001 37.002, 127.001 37.001))
        notes:
          type: string
          description: 메모
      required:
        - subBuildingName
        - centerLng
        - centerLat
        - boundaryWkt

    AdminAssignPlacesToSubBuildingsResponseDTO:
      type: object
      description: Place를 SubBuilding에 할당한 결과
      properties:
        totalPlaces:
          type: integer
          description: 대상 Building의 전체 Place 수
        assignedCount:
          type: integer
          description: SubBuilding에 할당된 Place 수
        unassignedCount:
          type: integer
          description: 어떤 SubBuilding에도 할당되지 않은 Place 수
        message:
          type: string
          description: 결과 메시지
      required:
        - totalPlaces
        - assignedCount
        - unassignedCount
        - message

    AdminListBuildingDeduplicationCandidatesResponseDTO:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/AdminBuildingDeduplicationCandidateDTO'
        cursor:
          type: string
          description: 없으면 다음 페이지가 없다는 의미.
      required:
        - items

    AdminBuildingDeduplicationCandidateDTO:
      type: object
      properties:
        id:
          type: string
        building1Id:
          type: string
        building2Id:
          type: string
        distanceInMeters:
          type: number
          format: double
        building1Name:
          type: string
        building2Name:
          type: string
        normalizedAddress:
          type: string
        building1Location:
          $ref: '#/components/schemas/LocationDTO'
        building2Location:
          $ref: '#/components/schemas/LocationDTO'
        acceptedAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        ignoredAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        canonicalBuildingId:
          type: string
      required:
        - id
        - building1Id
        - building2Id
        - distanceInMeters
        - normalizedAddress
        - building1Location
        - building2Location

    AdminListAllBannersResponseDTO:
      type: object
      properties:
        banners:
          type: array
          items:
            $ref: '#/components/schemas/AdminBannerDTO'
      required:
        - banners

    AdminBannerDTO:
      type: object
      properties:
        id:
          type: string
        loggingKey:
          type: string
        imageUrl:
          type: string
        clickPageUrl:
          type: string
        clickPageTitle:
          type: string
        startAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        endAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        displayOrder:
          type: integer
          format: int32
        bannerType:
          $ref: '#/components/schemas/HomeBannerTypeDTO'
      required:
        - id
        - loggingKey
        - imageUrl
        - clickPageUrl
        - clickPageTitle
        - displayOrder
        - bannerType

    AdminListHomeBannersResponseDTO:
      type: object
      properties:
        banners:
          type: array
          items:
            $ref: '#/components/schemas/AdminBannerDTO'
      required:
        - banners

    AdminCreateBannerRequestDTO:
      type: object
      properties:
        loggingKey:
          type: string
        imageUrl:
          type: string
        clickPageUrl:
          type: string
        clickPageTitle:
          type: string
        startAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        endAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        displayOrder:
          type: integer
          format: int32
        bannerType:
          $ref: '#/components/schemas/HomeBannerTypeDTO'
      required:
        - loggingKey
        - imageUrl
        - clickPageUrl
        - clickPageTitle
        - displayOrder
        - bannerType

    HomeBannerTypeDTO:
      type: string
      description: 홈 배너 타입
      enum:
        - MAIN
        - STRIP

    AdminListHomeAnnouncementsResponseDTO:
      type: object
      properties:
        announcements:
          type: array
          items:
            $ref: '#/components/schemas/AdminHomeAnnouncementDTO'
      required:
        - announcements

    AdminHomeAnnouncementDTO:
      type: object
      properties:
        id:
          type: string
        text:
          type: string
          description: 공지사항 텍스트
        linkUrl:
          type: string
          description: 클릭 시 이동할 URL
        displayOrder:
          type: integer
          format: int32
        startAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        endAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
      required:
        - id
        - text
        - linkUrl
        - displayOrder

    AdminCreateHomeAnnouncementRequestDTO:
      type: object
      properties:
        text:
          type: string
          description: 공지사항 텍스트
        linkUrl:
          type: string
          description: 클릭 시 이동할 URL
        displayOrder:
          type: integer
          format: int32
        startAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        endAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
      required:
        - text
        - linkUrl
        - displayOrder

    AdminListHomeRecommendedContentsResponseDTO:
      type: object
      properties:
        contents:
          type: array
          items:
            $ref: '#/components/schemas/AdminHomeRecommendedContentDTO'
      required:
        - contents

    AdminHomeRecommendedContentDTO:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
          description: 컨텐츠 제목
        description:
          type: string
          description: 컨텐츠 설명
        imageUrl:
          type: string
          description: 컨텐츠 이미지 URL
        linkUrl:
          type: string
          description: 클릭 시 이동할 URL (딥링크 가능)
        displayOrder:
          type: integer
          format: int32
        startAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        endAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
      required:
        - id
        - title
        - description
        - imageUrl
        - linkUrl
        - displayOrder

    AdminCreateHomeRecommendedContentRequestDTO:
      type: object
      properties:
        title:
          type: string
          description: 컨텐츠 제목
        description:
          type: string
          description: 컨텐츠 설명
        imageUrl:
          type: string
          description: 컨텐츠 이미지 URL
        linkUrl:
          type: string
          description: 클릭 시 이동할 URL (딥링크 가능)
        displayOrder:
          type: integer
          format: int32
        startAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        endAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
      required:
        - title
        - description
        - imageUrl
        - linkUrl
        - displayOrder

    AdminCreateImageUploadUrlsRequestDTO:
      properties:
        purposeType:
          $ref: '#/components/schemas/AdminImageUploadPurposeTypeDTO'
        count:
          type: integer
          description: 업로드할 이미지 수.
        filenameExtension:
          type: string
          description:
            업로드할 이미지의 확장자. '.'을 붙이지 말아야 한다. e.g. png, jpeg
            등.
      required:
        - purposeType
        - count
        - filenameExtension

    AdminImageUploadPurposeTypeDTO:
      type: string
      enum:
        - BANNER
        - CRUSHER_LABEL
        - BBUCLE_ROAD_MARKER
        - BBUCLE_ROAD_DESCRIPTION
        - RECOMMENDED_CONTENT

    AdminCreateImageUploadUrlsResponseDTO:
      type: object
      properties:
        urls:
          type: array
          items:
            $ref: '#/components/schemas/AdminImageUploadUrlDTO'
      required:
        - urls

    AdminImageUploadUrlDTO:
      type: object
      properties:
        url:
          type: string
        expireAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
      required:
        - url
        - expireAt

    AdminSearchPlacePresetDTO:
      type: object
      properties:
        id:
          type: string
        description:
          type: string
        searchText:
          type: string
      required:
        - id
        - description
        - searchText

    AdminCreateSearchPlacePresetRequestDTO:
      type: object
      properties:
        description:
          type: string
        searchText:
          type: string
      required:
        - description
        - searchText

    AdminSendPushNotificationRequestDTO:
      type: object
      properties:
        scheduledAt:
          # description: '비어 있으면 즉시 전송, 값이 있으면 예약 전송한다'
          $ref: '#/components/schemas/EpochMillisTimestamp'
        userIds:
          type: array
          items:
            type: string
        title:
          type: string
        body:
          type: string
        deepLink:
          type: string
      required:
        - userIds
        - body

    AdminPushNotificationScheduleDTO:
      type: object
      properties:
        id:
          type: string
        scheduledAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        sentAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        title:
          type: string
        body:
          type: string
        deepLink:
          type: string
        targetUserIds:
          type: array
          items:
            type: string
      required:
        - id
        - body
        - targetUserIds

    AdminListPushNotificationSchedulesResponseDTO:
      type: object
      properties:
        list:
          type: array
          items:
            $ref: '#/components/schemas/AdminPushNotificationScheduleDTO'
        cursor:
          type: string
          description: 없으면 다음 페이지가 없다는 의미.
      required:
        - list

    AdminUpdatePushNotificationScheduleRequestDTO:
      type: object
      properties:
        scheduledAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        title:
          type: string
        body:
          type: string
        deepLink:
          type: string
      required:
        - scheduledAt
        - body

    AdminChallengeB2bFormSchemaDTO:
      type: object
      properties:
        availableFields:
          type: array
          items:
            $ref: '#/components/schemas/AdminChallengeB2bFormSchemaAvailableFieldDTO'
      required:
        - availableFields

    AdminChallengeB2bFormSchemaAvailableFieldDTO:
      type: object
      properties:
        name:
          $ref: '#/components/schemas/AdminChallengeB2bFormSchemaAvailableFieldNameEnumDTO'
          nullable: true
          description: built-in 질문 타입 (null이면 custom 질문)
        key:
          type: string
          nullable: true
          description: Custom 질문의 불변 key (camelCase, built-in인 경우 null)
        customDisplayName:
          type: string
          nullable: true
          description:
            질문명 override (built-in인 경우 선택, custom인 경우 필수)
        options:
          type: array
          items:
            type: string
          nullable: true
          description: 객관식 옵션 (null이면 주관식)

    AdminChallengeB2bFormSchemaAvailableFieldNameEnumDTO:
      type: string
      enum:
        - PARTICIPANT_NAME
        - COMPANY_NAME
        - ORGANIZATION_NAME
        - EMPLOYEE_IDENTIFICATION_NUMBER

    BbucleRoadPageDTO:
      type: object
      properties:
        id:
          type: string
        title:
          type: string
        titleImageUrl:
          type: string
        summary:
          type: array
          items:
            type: string
        sections:
          type: array
          items:
            $ref: '#/components/schemas/BbucleRoadSectionDTO'
        createdAt:
          type: string
          format: date-time
      required:
        - id
        - title
        - titleImageUrl
        - summary
        - sections
        - createdAt

    BbucleRoadSectionDTO:
      type: object
      properties:
        id:
          type: string
        type:
          $ref: '#/components/schemas/BbucleRoadSectionTypeDTO'
        title:
          type: string
        mapConfig:
          $ref: '#/components/schemas/MapConfigDTO'
          nullable: true
        markers:
          type: array
          items:
            $ref: '#/components/schemas/MapMarkerDTO'
          nullable: true
        imageUrls:
          type: array
          items:
            type: string
          description: 이미지 URL 목록
        accessibilityTips:
          type: string
        order:
          type: integer
      required:
        - id
        - type
        - title
        - order

    BbucleRoadSectionTypeDTO:
      type: string
      enum:
        - MAP_OVERVIEW
        - TRAFFIC
        - TICKETING
        - WHEELCHAIR_VIEW
        - NEARBY_RESTAURANTS
        - NEARBY_CAFES

    MapConfigDTO:
      type: object
      properties:
        center:
          $ref: '#/components/schemas/LocationDTO'
        level:
          type: integer
          description: 지도 확대 레벨 (1-14)
      required: []

    MapMarkerDTO:
      type: object
      properties:
        id:
          type: string
        category:
          $ref: '#/components/schemas/MarkerCategoryDTO'
        position:
          $ref: '#/components/schemas/LocationDTO'
        tooltipText:
          type: string
        size:
          $ref: '#/components/schemas/MarkerSizeDTO'
        customImageUrl:
          type: string
      required:
        - id
        - category
        - position
        - tooltipText

    MarkerCategoryDTO:
      type: string
      enum:
        - RESTAURANT
        - CAFE
        - ACCESSIBLE_TOILET
        - ACCESSIBILITY_INFO
        - TICKET_BOOTH
        - ENTRANCE
        - ELEVATOR
        - SUBWAY_EXIT
        - BUS_STOP
        - PARKING
        - CUSTOM

    MarkerSizeDTO:
      type: object
      properties:
        width:
          type: integer
        height:
          type: integer
      required:
        - width
        - height

    CreateBbucleRoadPageRequestDTO:
      type: object
      properties:
        title:
          type: string
        titleImageUrl:
          type: string
        summary:
          type: array
          items:
            type: string
        sections:
          type: array
          items:
            $ref: '#/components/schemas/CreateBbucleRoadSectionDTO'
      required:
        - title
        - titleImageUrl
        - summary
        - sections

    CreateBbucleRoadSectionDTO:
      type: object
      properties:
        type:
          $ref: '#/components/schemas/BbucleRoadSectionTypeDTO'
        title:
          type: string
        mapConfig:
          $ref: '#/components/schemas/MapConfigDTO'
          nullable: true
        markers:
          type: array
          items:
            $ref: '#/components/schemas/CreateMapMarkerDTO'
          nullable: true
        imageUrls:
          type: array
          items:
            type: string
          description: 이미지 URL 목록
        accessibilityTips:
          type: string
        order:
          type: integer
      required:
        - type
        - title
        - order

    CreateMapMarkerDTO:
      type: object
      properties:
        category:
          $ref: '#/components/schemas/MarkerCategoryDTO'
        position:
          $ref: '#/components/schemas/LocationDTO'
        tooltipText:
          type: string
        size:
          $ref: '#/components/schemas/MarkerSizeDTO'
        customImageUrl:
          type: string
      required:
        - category
        - position
        - tooltipText

    UpdateBbucleRoadPageRequestDTO:
      type: object
      properties:
        title:
          type: string
        titleImageUrl:
          type: string
        summary:
          type: array
          items:
            type: string
        sections:
          type: array
          items:
            $ref: '#/components/schemas/UpdateBbucleRoadSectionDTO'
      required:
        - title
        - titleImageUrl
        - summary
        - sections

    UpdateBbucleRoadSectionDTO:
      type: object
      properties:
        id:
          type: string
          description: 기존 섹션은 id가 있고, 새 섹션은 null
        type:
          $ref: '#/components/schemas/BbucleRoadSectionTypeDTO'
        title:
          type: string
        mapConfig:
          $ref: '#/components/schemas/MapConfigDTO'
          nullable: true
        markers:
          type: array
          items:
            $ref: '#/components/schemas/UpdateMapMarkerDTO'
          nullable: true
        imageUrls:
          type: array
          items:
            type: string
          description: 이미지 URL 목록
        accessibilityTips:
          type: string
        order:
          type: integer
      required:
        - type
        - title
        - order

    UpdateMapMarkerDTO:
      type: object
      properties:
        id:
          type: string
          description: 기존 마커는 id가 있고, 새 마커는 null
        category:
          $ref: '#/components/schemas/MarkerCategoryDTO'
        position:
          $ref: '#/components/schemas/LocationDTO'
        tooltipText:
          type: string
        size:
          $ref: '#/components/schemas/MarkerSizeDTO'
        customImageUrl:
          type: string
      required:
        - category
        - position
        - tooltipText

    PlaceCategoryDto:
      description: 장소 카테고리 enum
      type: string
      enum:
        - MARKET
        - CONVENIENCE_STORE
        - KINDERGARTEN
        - SCHOOL
        - ACADEMY
        - PARKING_LOT
        - GAS_STATION
        - SUBWAY_STATION
        - BANK
        - CULTURAL_FACILITIES
        - AGENCY
        - PUBLIC_OFFICE
        - ATTRACTION
        - ACCOMODATION
        - RESTAURANT
        - CAFE
        - HOSPITAL
        - PHARMACY

    AdminPlaceListDto:
      description: 저장 리스트 목록 항목
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
          nullable: true
        thumbnailUrl:
          type: string
          nullable: true
        iconColor:
          type: string
          nullable: true
          description: 아이콘 배경색 (hex, e.g. "#FFC01E"). null이면 기본색 사용.
        placeCount:
          type: integer
          format: int32
          description: 리스트에 포함된 장소 수
        createdAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        updatedAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
      required:
        - id
        - name
        - placeCount
        - createdAt
        - updatedAt

    AdminPlaceListDetailDto:
      description: 저장 리스트 상세 정보 (장소 목록 포함)
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
          nullable: true
        thumbnailUrl:
          type: string
          nullable: true
        iconColor:
          type: string
          nullable: true
          description: 아이콘 배경색 (hex, e.g. "#FFC01E"). null이면 기본색 사용.
        places:
          type: array
          items:
            $ref: '#/components/schemas/AdminPlaceListPlaceDto'
        createdAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
        updatedAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
      required:
        - id
        - name
        - places
        - createdAt
        - updatedAt

    AdminPlaceListPlaceDto:
      description: 저장 리스트에 포함된 장소 정보
      type: object
      properties:
        placeId:
          type: string
        name:
          type: string
        address:
          type: string
          nullable: true
        location:
          $ref: '#/components/schemas/LocationDTO'
        accessibilityScore:
          type: number
          format: double
          nullable: true
      required:
        - placeId
        - name
        - location

    AdminListPlaceListsResponseDto:
      description: 저장 리스트 목록 응답
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/AdminPlaceListDto'
        cursor:
          type: string
          nullable: true
          description: 다음 페이지 커서 (없으면 마지막 페이지)
      required:
        - items

    AdminCreatePlaceListRequestDto:
      description: 저장 리스트 생성 요청
      type: object
      properties:
        name:
          type: string
        description:
          type: string
          nullable: true
        thumbnailUrl:
          type: string
          nullable: true
        iconColor:
          type: string
          nullable: true
          description: 아이콘 배경색 (hex, e.g. "#FFC01E"). null이면 기본색 사용.
        placeIds:
          type: array
          items:
            type: string
          description: 리스트에 포함할 장소 ID 목록
      required:
        - name
        - placeIds

    AdminUpdatePlaceListRequestDto:
      description: 저장 리스트 수정 요청
      type: object
      properties:
        name:
          type: string
        description:
          type: string
          nullable: true
        thumbnailUrl:
          type: string
          nullable: true
        iconColor:
          type: string
          nullable: true
          description: 아이콘 배경색 (hex, e.g. "#FFC01E"). null이면 기본색 사용.
        placeIds:
          type: array
          items:
            type: string
          description: 리스트에 포함할 장소 ID 목록 (기존 매핑을 대체)
      required:
        - name
        - placeIds

    AdminPlaceCategoryCacheDto:
      description: 장소 카테고리 캐시 정보
      type: object
      properties:
        id:
          type: string
        categoryString:
          type: string
          description: 지도 API에서 반환된 원본 카테고리 문자열
        placeCategory:
          $ref: '#/components/schemas/PlaceCategoryDto'
        createdAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
          description: 생성 시각
        updatedAt:
          $ref: '#/components/schemas/EpochMillisTimestamp'
          description: 수정 시각
      required:
        - id
        - categoryString
        - placeCategory
        - createdAt
        - updatedAt

    AdminListPlaceCategoryCachesResponseDto:
      description: 장소 카테고리 캐시 목록 응답
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/AdminPlaceCategoryCacheDto'
        cursor:
          type: string
          nullable: true
          description: 다음 페이지 커서 (없으면 마지막 페이지)
      required:
        - items

    AdminCreatePlaceCategoryCacheRequestDto:
      description: 장소 카테고리 캐시 생성 요청
      type: object
      properties:
        categoryString:
          type: string
          description: 지도 API에서 반환된 원본 카테고리 문자열
        placeCategory:
          $ref: '#/components/schemas/PlaceCategoryDto'
      required:
        - categoryString
        - placeCategory

    AdminUpdatePlaceCategoryCacheRequestDto:
      description: 장소 카테고리 캐시 수정 요청
      type: object
      properties:
        placeCategory:
          $ref: '#/components/schemas/PlaceCategoryDto'
      required:
        - placeCategory

    AdminSearchPlacesByKeywordRequestDto:
      description: 키워드 장소 검색 요청
      type: object
      properties:
        keyword:
          type: string
        circleRegion:
          $ref: '#/components/schemas/AdminCircleSearchRegionDto'
        rectangleRegion:
          $ref: '#/components/schemas/AdminRectangleSearchRegionDto'
      required:
        - keyword

    AdminSearchPlacesByKeywordResponseDto:
      description: 키워드 장소 검색 응답
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/AdminSearchedPlaceDto'
      required:
        - items

    AdminSearchedPlaceDto:
      description: 검색된 장소 정보
      type: object
      properties:
        placeId:
          type: string
        name:
          type: string
        address:
          type: string
          nullable: true
        location:
          $ref: '#/components/schemas/LocationDTO'
        hasBuildingAccessibility:
          type: boolean
        hasPlaceAccessibility:
          type: boolean
        accessibilityScore:
          type: number
          format: double
          nullable: true
        isAccessibilityRegistrable:
          type: boolean
      required:
        - placeId
        - name
        - location
        - hasBuildingAccessibility
        - hasPlaceAccessibility
        - isAccessibilityRegistrable

    AdminCircleSearchRegionDto:
      description: 원형 검색 영역
      type: object
      properties:
        centerLocation:
          $ref: '#/components/schemas/LocationDTO'
        radiusMeters:
          type: integer
      required:
        - centerLocation
        - radiusMeters

    AdminRectangleSearchRegionDto:
      description: 직사각형 검색 영역
      type: object
      properties:
        leftTopLocation:
          $ref: '#/components/schemas/LocationDTO'
        rightBottomLocation:
          $ref: '#/components/schemas/LocationDTO'
      required:
        - leftTopLocation
        - rightBottomLocation

  responses:
    NoContent:
      description: successful operation
